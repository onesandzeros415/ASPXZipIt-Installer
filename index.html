<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Aspxzipit-installer : Rackspace CloudSites content and MSSQL backup utility. Rackspace Cloud API KEY required for use." />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Aspxzipit-installer</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/onesandzeros415/ASPXZipIt-Installer">View on GitHub</a>

          <h1 id="project_title">Aspxzipit-installer</h1>
          <h2 id="project_tagline">Rackspace CloudSites content and MSSQL backup utility. Rackspace Cloud API KEY required for use.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/onesandzeros415/ASPXZipIt-Installer/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/onesandzeros415/ASPXZipIt-Installer/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>ASPXZipIt-Installer</h1>

<p>This is a self install tool for Rackspace CloudSites IIS customers to allow for backing up of their web content and MSSQL database to their CloudFiles account.</p>

<p>Installer supports both .NET 3.5, .NET 4.0, and .NET 4.5 without any modification necessary.  Compression is made possible through the <a href="http://dotnetzip.codeplex.com/">DotNetZip Library</a>. </p>

<p>Instructions:</p>

<p>Step 1.  Download zip or tar from above.<br>
Step 2.  Uncompress your zip or tar locally on your computer.<br>
Step 3.  Upload ASPXZipIt-Installer.aspx to the root of your web site: \fs4-n01\stor3wc2dfw1\xxx\<a href="http://www.yourdomain.com%5Cweb%5Ccontent%5CASPXZipIt-Installer.aspx">www.yourdomain.com\web\content\ASPXZipIt-Installer.aspx</a><br>
Step 4.  Impersonation must be enabled for Installer to work.  Please see <a href="http://www.rackspace.com/knowledge_center/article/how-do-i-add-impersonation-to-my-aspnet-cloud-site">this article</a> for more information.  Edit your web.config and add the following if you do not already have:<br><br></p>

<p><code>&lt;configuration&gt;</code><br><code>&lt;system.web&gt;</code><br><code>&lt;identity impersonate="true" userName="dfw\USERNAME" password="PASSWORD" /&gt;</code><br><code>&lt;/system.web&gt;</code><br><code>&lt;/configuration&gt;</code><br><br><code>&lt;configuration&gt;</code><br><code>&lt;system.web&gt;</code><br><code>&lt;identity impersonate="true" userName="ord\USERNAME" password="PASSWORD" /&gt;</code><br><code>&lt;/system.web&gt;</code><br><code>&lt;/configuration&gt;</code><br><br></p>

<p>Step 5.  In ftp navigate to \fs4-n01\stor3wc2dfw1\xxx\<a href="http://www.yourdomain.com%5Cweb%5C">www.yourdomain.com\web\</a> and right click the content directory and apply a permission set of 770.<br>
Step 6.  Open a browser and browse to ASPXZipIt Installer: <a href="http://www.yourdomain.com/ASPXZipIt-Installer.aspx">www.yourdomain.com/ASPXZipIt-Installer.aspx</a><br>
Step 7.  Click the rebuild application button to trigger a recompilation of your site to ensure impersonation and permission changes have taken affect.<br>
Step 8.  Select your .NET version 3.5 or 4.0<br>
Step 9.  Enter your CloudFiles API Username and API Key which will be stored in the following location: \fs4-n01\stor3wc2dfw1\xxx\<a href="http://www.yourdomain.com%5Cweb%5Ccontent%5Caspxzipit%5C">www.yourdomain.com\web\content\aspxzipit\</a><br>
Step 10.  Enter a username and password to protect ASPXZipIt from outside users.<br>
Step 11.  Click install ASPXZIPIT<br>
Step 12.  In ftp navigate to \fs4-n01\stor3wc2dfw1\xxx\<a href="http://www.yourdomain.com%5Cweb%5Ccontent%5Caspxzipit%5C">www.yourdomain.com\web\content\aspxzipit\</a> and edit the following values in the Web.config file:<br></p>

<p><code>&lt;add key="CloudFilesUserName" value="USERNAME GOES HERE" /&gt;</code> <br><code>&lt;add key="CloudFilesApiKey" value="APIKEYGOES HERE" /&gt;</code></p>

<p>Step 13. In ftp set your content directory permissions to 770.  To do this navigate to \fs4-n01\stor3wc2dfw1\xxx\<a href="http://www.yourdomain.com%5Cweb%5Ccontent%5C">www.yourdomain.com\web\content\</a> with your preferred FTP program and apply a permission set of 770.<br>
Step 14. Browse to ASPXZipIt and Begin backing up your site: <a href="http://www.yourdomain.com/aspxzipit">www.yourdomain.com/aspxzipit</a><br><br></p>

<p>For access to compiled versions of ASPXZipIt for manual install please see the following:</p>

<p>ASP.NET 3.5:
<a href="http://onesandzeros415.github.com/ASPXZipIt-NET35/">http://onesandzeros415.github.com/ASPXZipIt-NET35/</a></p>

<p>ASP.NET 4.0
<a href="http://onesandzeros415.github.com/ASPXZipIt-NET40/">http://onesandzeros415.github.com/ASPXZipIt-NET40/</a></p>

<p>MSSQL Backup Utility:</p>

<p>Things to note:</p>

<p>MSSQL Server must be setup to write to a share with appropriate permissions in place.  The utility essentially has mssql write 
a backup file to disk and then IIS zips and uploads to CloudFiles.</p>

<p>In order to use the MSSQL Backup Utility please be sure to install the following stored procedure:</p>

<p>Step 1. To install a stored procedure open up SSMS (SQL Server Management Studio) <br>
Step 2. Select New Query in the upper right hand corener.  <br>
Step 3. In the query window enter the following:<br></p>

<pre><code>
set ANSI_NULLS ON
set QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[FullBackup]
@FileName nvarchar(256)
AS
BEGIN

SET NOCOUNT ON;

BACKUP DATABASE [123456_YourDatabase] TO DISK = @FileName WITH COPY_ONLY, NOFORMAT, NOINIT, NAME = N'Full Database Backup', SKIP, NOREWIND, NOUNLOAD, STATS = 10

END

</code></pre>

<p>Note:  You skip to step 5 if you use the Install Stored Procedure Button.</p>

<p>Step 4. Be sure to enter your actual database name where [123456_YourDatabase] is.  <br>
Step 5. Hit Execute to install the query.<br>
Step 6. You can now backup your databse to Rackspace CloudFiles.<br></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Aspxzipit-installer maintained by <a href="https://github.com/onesandzeros415">onesandzeros415</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-34098471-6");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
